{"version":3,"sources":["components/Profile/ProfileForm.module.css","components/Layout/MainNavigation.module.css","components/Profile/UserProfile.module.css","components/StartingPage/StartingPageContent.module.css","components/store/auth-context.js","components/Layout/MainNavigation.js","components/Layout/Layout.js","components/Profile/ProfileForm.js","components/Profile/UserProfile.js","components/Auth/AuthForm.js","pages/AuthPage.js","components/StartingPage/StartingPageContent.js","pages/HomePage.js","App.js","index.js","components/Auth/AuthForm.module.css"],"names":["module","exports","authContext","React","createContext","token","isLoggedIn","login","logout","AuthContextProvider","props","intialToken","localStorage","getItem","useState","setToken","removeItem","contextValue","expirationTime","setItem","remainingTime","currentTime","Date","getTime","calculateRenainingTime","setTimeout","Provider","value","children","MainNavigation","authCtx","useContext","className","classes","header","to","logo","onClick","Layout","ProfileForm","newPasswordRef","useRef","history","useHistory","form","onSubmit","e","preventDefault","enteredNewPassword","current","fetch","method","body","JSON","stringify","idToken","password","returnSecureToken","headers","then","data","replace","control","htmlFor","type","id","ref","action","UserProfile","profile","AuthForm","isLogin","setIsLogin","isLoading","setIsLoading","emailRef","passwordRef","auth","url","enteredEmail","enteredPassword","email","response","ok","json","Error","err","message","expireTime","expiresIn","toISOString","catch","alert","required","actions","style","color","toggle","prevState","AuthPage","StartingPageContent","starting","HomePage","App","path","exact","ReactDOM","createRoot","document","getElementById","render"],"mappings":"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","file":"static/js/main.b45fca37.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"ProfileForm_form__1zQf-\",\"control\":\"ProfileForm_control__hPGQK\",\"action\":\"ProfileForm_action__Hm4oP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"MainNavigation_header__dwcB4\",\"logo\":\"MainNavigation_logo__1utRp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"UserProfile_profile__35_rM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"starting\":\"StartingPageContent_starting__2oKT_\"};","import React from \"react\";\r\nimport { useState } from \"react\";\r\n\r\nconst authContext = React.createContext({\r\n  token: \"\",\r\n  isLoggedIn: false,\r\n  login(token) {},\r\n  logout() {},\r\n});\r\n\r\nconst calculateRenainingTime = (expirationTime) => {\r\n  const currentTime = new Date().getTime();\r\n  const adjExpirationTime = new Date(expirationTime).getTime();\r\n\r\n  const remainingDuration = adjExpirationTime - currentTime;\r\n\r\n  return remainingDuration;\r\n};\r\n\r\nexport const AuthContextProvider = (props) => {\r\n  const intialToken = localStorage.getItem(\"token\");\r\n  const [token, setToken] = useState(intialToken);\r\n\r\n  const userIsLoggedIn = !!token;\r\n\r\n  const login = (token, expirationTime) => {\r\n    setToken(token);\r\n    localStorage.setItem(\"token\", token);\r\n\r\n    const remainingTime = calculateRenainingTime(expirationTime); // 1 hour\r\n\r\n    setTimeout(logout, remainingTime);\r\n  };\r\n\r\n  const logout = () => {\r\n    setToken(null);\r\n    localStorage.removeItem(\"token\");\r\n  };\r\n\r\n  const contextValue = {\r\n    token,\r\n    isLoggedIn: userIsLoggedIn,\r\n    login,\r\n    logout,\r\n  };\r\n\r\n  return (\r\n    <authContext.Provider value={contextValue}>\r\n      {props.children}\r\n    </authContext.Provider>\r\n  );\r\n};\r\n\r\nexport default authContext;\r\n","import { Fragment, useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport authContext from \"../store/auth-context\";\n\nimport classes from \"./MainNavigation.module.css\";\n\nconst MainNavigation = () => {\n  const authCtx = useContext(authContext);\n\n  const logoutHandler = () => {\n    authCtx.logout();\n  };\n\n  return (\n    <header className={classes.header}>\n      <Link to=\"/\">\n        <div className={classes.logo}>React Auth</div>\n      </Link>\n      <nav>\n        <ul>\n          {!authCtx.isLoggedIn && (\n            <li>\n              <Link to=\"/auth\">Login</Link>\n            </li>\n          )}\n          {authCtx.isLoggedIn && (\n            <Fragment>\n              <li>\n                <Link to=\"/profile\">Profile</Link>\n              </li>\n              <li>\n                <button onClick={logoutHandler}>Logout</button>\n              </li>\n            </Fragment>\n          )}\n        </ul>\n      </nav>\n    </header>\n  );\n};\n\nexport default MainNavigation;\n","import { Fragment } from 'react';\n\nimport MainNavigation from './MainNavigation';\n\nconst Layout = (props) => {\n  return (\n    <Fragment>\n      <MainNavigation />\n      <main>{props.children}</main>\n    </Fragment>\n  );\n};\n\nexport default Layout;\n","import { useContext, useRef } from \"react\";\nimport authContext from \"../store/auth-context\";\nimport classes from \"./ProfileForm.module.css\";\nimport { useHistory } from \"react-router-dom\";\n\nconst ProfileForm = () => {\n  const newPasswordRef = useRef();\n  const authCtx = useContext(authContext);\n  const history = useHistory();\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    const enteredNewPassword = newPasswordRef.current.value;\n\n    fetch(\n      \"https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyAoRN6mEWCZU3aIYJf-9BzpaGndYULtBu0\",\n      {\n        method: \"POST\",\n        body: JSON.stringify({\n          idToken: authCtx.token,\n          password: enteredNewPassword,\n          returnSecureToken: false,\n        }),\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n      }\n    ).then((data) => {\n      history.replace(\"/\");\n    });\n  };\n\n  return (\n    <form className={classes.form} onSubmit={submitHandler}>\n      <div className={classes.control}>\n        <label htmlFor=\"new-password\">New Password</label>\n        <input type=\"password\" id=\"new-password\" ref={newPasswordRef} />\n      </div>\n      <div className={classes.action}>\n        <button>Change Password</button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProfileForm;\n","import ProfileForm from './ProfileForm';\nimport classes from './UserProfile.module.css';\n\nconst UserProfile = () => {\n  return (\n    <section className={classes.profile}>\n      <h1>Your User Profile</h1>\n      <ProfileForm />\n    </section>\n  );\n};\n\nexport default UserProfile;\n","import { useRef, useState, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport authContext from \"../store/auth-context\";\nimport classes from \"./AuthForm.module.css\";\n\nconst AuthForm = () => {\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const emailRef = useRef();\n  const passwordRef = useRef();\n\n  const history = useHistory();\n\n  const authCtx = useContext(authContext);\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    let url;\n    setIsLoading(true);\n\n    const enteredEmail = emailRef.current.value;\n    const enteredPassword = passwordRef.current.value;\n\n    if (isLogin) {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyAoRN6mEWCZU3aIYJf-9BzpaGndYULtBu0\";\n    } else {\n      url =\n        \"https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyAoRN6mEWCZU3aIYJf-9BzpaGndYULtBu0\";\n    }\n\n    fetch(url, {\n      method: \"POST\",\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true,\n      }),\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    })\n      .then((response) => {\n        setIsLoading(false);\n        if (response.ok) {\n          return response.json();\n        } else {\n          return response.json().then((data) => {\n            throw new Error(err.message);\n          });\n        }\n      })\n      .then((data) => {\n        const expireTime = new Date(\n          new Date().getTime() + +data.expiresIn * 1000\n        );\n        authCtx.login(data.idToken, expireTime.toISOString());\n\n        history.replace(\"/\");\n      })\n      .catch((err) => {\n        alert(\"Authentication failed\");\n      });\n  };\n\n  return (\n    <section className={classes.auth}>\n      <h1>{isLogin ? \"Login\" : \"Sign Up\"}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor=\"email\">Your Email</label>\n          <input type=\"email\" id=\"email\" required ref={emailRef} />\n        </div>\n        <div className={classes.control}>\n          <label htmlFor=\"password\">Your Password</label>\n          <input type=\"password\" id=\"password\" required ref={passwordRef} />\n        </div>\n        <div className={classes.actions}>\n          {!isLoading && (\n            <button>{isLogin ? \"Login\" : \"Create Account\"}</button>\n          )}\n          {isLoading && <p style={{ color: \"white\" }}>Loading...</p>}\n          <button\n            type=\"button\"\n            className={classes.toggle}\n            onClick={switchAuthModeHandler}\n          >\n            {isLogin ? \"Create new account\" : \"Login with existing account\"}\n          </button>\n        </div>\n      </form>\n    </section>\n  );\n};\n\nexport default AuthForm;\n","import AuthForm from '../components/Auth/AuthForm';\n\nconst AuthPage = () => {\n  return <AuthForm />;\n};\n\nexport default AuthPage;\n","import classes from './StartingPageContent.module.css';\n\nconst StartingPageContent = () => {\n  return (\n    <section className={classes.starting}>\n      <h1>Welcome on Board!</h1>\n    </section>\n  );\n};\n\nexport default StartingPageContent;\n","import StartingPageContent from '../components/StartingPage/StartingPageContent';\n\nconst HomePage = () => {\n  return <StartingPageContent />;\n};\n\nexport default HomePage;\n","import { useContext } from \"react\";\nimport { Switch, Route, Redirect } from \"react-router-dom\";\n\nimport Layout from \"./components/Layout/Layout\";\nimport UserProfile from \"./components/Profile/UserProfile\";\nimport authContext from \"./components/store/auth-context\";\nimport AuthPage from \"./pages/AuthPage\";\nimport HomePage from \"./pages/HomePage\";\n\nfunction App() {\n  const authCtx = useContext(authContext);\n  return (\n    <Layout>\n      <Switch>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n        <Route path=\"/auth\">\n          <AuthPage />\n        </Route>\n        <Route path=\"/profile\">\n          {authCtx.isLoggedIn && <UserProfile />}\n          {!authCtx.isLoggedIn && <Redirect to=\"/auth\" />}\n        </Route>\n        <Route path=\"*\">\n          <Redirect to=\"/\" />\n        </Route>\n      </Switch>\n    </Layout>\n  );\n}\n\nexport default App;\n","import ReactDOM from \"react-dom/client\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport { AuthContextProvider } from \"./components/store/auth-context\";\n\nconst root = ReactDOM.createRoot(document.getElementById(\"root\"));\nroot.render(\n  <AuthContextProvider>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </AuthContextProvider>\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"auth\":\"AuthForm_auth__1jdrs\",\"control\":\"AuthForm_control__3MAWF\",\"actions\":\"AuthForm_actions__ItGXx\",\"toggle\":\"AuthForm_toggle__1E1r9\"};"],"sourceRoot":""}